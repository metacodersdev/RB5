{"version":3,"file":"reviewDialogViewTests.js","names":["suite","baseEmptyCommentListPayload","stat","total_results","links","emptyDiffCommentsPayload","_","defaults","diff_comments","emptyFileAttachmentCommentsPayload","file_attachment_comments","emptyGeneralCommentsPayload","general_comments","emptyScreenshotCommentsPayload","screenshot_comments","baseCommentPayload","id","issue_opened","issue_status","text","diffCommentPayload","first_line","num_lines","filediff","source_file","dest_file","source_revision","interfilediff","fileAttachmentCommentPayload","extra_data","link_text","thumbnail_html","review_url","file_attachment","filename","icon_url","generalCommentPayload","screenshotCommentPayload","x","y","w","h","thumbnail_url","screenshot","caption","origGeneralCommentsEnabled","RB","EnabledFeatures","generalComments","reviewRequestEditor","review","dlg","createReviewDialog","ReviewDialogView","create","container","$testsScratch","Promise","resolve","reject","once","beforeEach","origMove","$","fn","move","reviewRequest","ReviewRequest","summary","DnDUploader","ReviewRequestEditor","Review","parentObject","spyOn","and","resolveTo","callFake","pos","call","DiffFragmentQueueView","prototype","afterEach","instance","_instance","describe","it","expect","toThrow","toBeFalsy","children","length","toBe","toBeTruthy","fail","close","isNew","_bodyTopView","$editor","_bodyBottomView","$el","is","_$shipIt","prop","_$spinner","bodyTopText","bodyBottomText","set","bodyTop","bodyBottom","loaded","shipIt","fileAttachmentCommentsPayload","generalCommentsPayload","diffCommentsPayload","screenshotCommentsPayload","commentView","ajaxData","href","self","clone","options","type","success","url","testLoadReview","on","UserSession","ready","calls","argsFor","data","toEqual","$button","_$buttons","find","ajax","toHaveBeenCalled","not","_commentViews","testLoadGeneralComments","$issueOpened","window","returnValue","_generalCommentsCollection","opts","complete","caughtEvent","at","click","testLoadDiffComments","diffQueueProto","queueLoad","count","loadFragments","_diffCommentsCollection","testLoadFileAttachmentComments","attr","html","_fileAttachmentCommentsCollection","testLoadScreenshotComments","$img","toString","$filenameA","_screenshotCommentsCollection","comment","testSaveComment","richText","newCommentText","model","trigger","inlineEditorView","startEdit","setValue","textEditor","setRichText","save","get","testSaveCommentPreventsXSS","rbTestFoundXSS","undefined","testSelfXSS","bodyView","attrName","editor","openEditor","setText","getText","runTest","bodyTopEditor","bodyBottomEditor","_saveReview"],"sources":["../../../../../../static/rb/js/views/tests/reviewDialogViewTests.es6.js"],"sourcesContent":["suite('rb/views/ReviewDialogView', function() {\n    const baseEmptyCommentListPayload = {\n        stat: 'ok',\n        total_results: 0,\n        links: {},\n    };\n    const emptyDiffCommentsPayload = _.defaults({\n        diff_comments: [],\n    }, baseEmptyCommentListPayload);\n    const emptyFileAttachmentCommentsPayload = _.defaults({\n        file_attachment_comments: [],\n    }, baseEmptyCommentListPayload);\n    const emptyGeneralCommentsPayload = _.defaults({\n        general_comments: [],\n    }, baseEmptyCommentListPayload);\n    const emptyScreenshotCommentsPayload = _.defaults({\n        screenshot_comments: [],\n    }, baseEmptyCommentListPayload);\n    const baseCommentPayload = {\n        id: 1,\n        issue_opened: true,\n        issue_status: 'opened',\n        text: 'My comment',\n    };\n    const diffCommentPayload = _.defaults({\n        first_line: 10,\n        num_lines: 5,\n        filediff: {\n            id: 1,\n            source_file: 'my-file',\n            dest_file: 'my-file',\n            source_revision: '1',\n        },\n        interfilediff: {\n            id: 2,\n            source_file: 'my-file',\n            dest_file: 'my-file',\n            source_revision: '2',\n        },\n    }, baseCommentPayload);\n    const fileAttachmentCommentPayload = _.defaults({\n        extra_data: {},\n        link_text: 'my-link-text',\n        thumbnail_html: '<blink>Boo</blink>',\n        review_url: '/review-ui/',\n        file_attachment: {\n            id: 10,\n            filename: 'file.txt',\n            icon_url: 'data:image/gif;base64,',\n        },\n    }, baseCommentPayload);\n    const generalCommentPayload = baseCommentPayload;\n    const screenshotCommentPayload = _.defaults({\n        x: 10,\n        y: 20,\n        w: 30,\n        h: 40,\n        thumbnail_url: 'data:image/gif;base64,',\n        screenshot: {\n            id: 10,\n            caption: 'My caption',\n            filename: 'image.png',\n            review_url: '/review-ui/',\n        },\n    }, baseCommentPayload);\n    const origGeneralCommentsEnabled = RB.EnabledFeatures.generalComments;\n    let reviewRequestEditor;\n    let review;\n    let dlg;\n\n    async function createReviewDialog() {\n        const dlg = RB.ReviewDialogView.create({\n            review: review,\n            container: $testsScratch,\n            reviewRequestEditor: reviewRequestEditor\n        });\n\n        return new Promise((resolve, reject) => {\n            dlg.once('loadCommentsDone', () => {\n                resolve(dlg);\n            });\n        });\n    }\n\n    beforeEach(function() {\n        const origMove = $.fn.move;\n        const reviewRequest = new RB.ReviewRequest({\n            summary: 'My Review Request',\n        });\n\n        RB.DnDUploader.create();\n\n        reviewRequestEditor = new RB.ReviewRequestEditor({\n            reviewRequest: reviewRequest,\n        });\n\n        review = new RB.Review({\n            parentObject: reviewRequest,\n        });\n\n        spyOn(review, 'ready').and.resolveTo();\n\n        /*\n         * modalBox uses move(... 'fixed') for all positioning, which will\n         * cause the box to flash on screen during tests. Override this to\n         * disallow fixed.\n         */\n        spyOn($.fn, 'move').and.callFake(function(x, y, pos) {\n            if (pos === 'fixed') {\n                pos = 'absolute';\n            }\n\n            return origMove.call(this, x, y, pos);\n        });\n\n        /* Prevent these from being called. */\n        spyOn(RB.DiffFragmentQueueView.prototype, 'queueLoad');\n        spyOn(RB.DiffFragmentQueueView.prototype, 'loadFragments');\n\n        /* By default, general comments should be enabled. */\n        RB.EnabledFeatures.generalComments = true;\n    });\n\n    afterEach(function() {\n        RB.DnDUploader.instance = null;\n        RB.ReviewDialogView._instance = null;\n        RB.EnabledFeatures.generalComments = origGeneralCommentsEnabled;\n    });\n\n    describe('Class methods', function() {\n        describe('create', function() {\n            it('Without a review', function() {\n                expect(() => RB.ReviewDialogView.create({\n                    container: $testsScratch,\n                    reviewRequestEditor: reviewRequestEditor,\n                })).toThrow();\n\n                expect(RB.ReviewDialogView._instance).toBeFalsy();\n                expect($testsScratch.children().length).toBe(0);\n            });\n\n            it('With a review', async function() {\n                dlg = await createReviewDialog();\n\n                expect(dlg).toBeTruthy();\n                expect(RB.ReviewDialogView._instance).toBe(dlg);\n\n                /* One for the dialog, one for the background box. */\n                expect($testsScratch.children().length).toBe(2);\n            });\n\n            it('With existing instance', async function() {\n                dlg = await createReviewDialog();\n\n                try {\n                    await createReviewDialog();\n                    fail('Expected createReviewDialog to throw');\n                } catch {\n                }\n\n                expect(RB.ReviewDialogView._instance).toBe(dlg);\n                expect($testsScratch.children().length).toBe(2);\n            });\n        });\n    });\n\n    describe('Instances', function() {\n        describe('Methods', function() {\n            it('close', async function() {\n                dlg = await createReviewDialog();\n                expect($testsScratch.children().length).toBe(2);\n\n                dlg.close();\n                expect($testsScratch.children().length).toBe(0);\n                expect(RB.ReviewDialogView._instance).toBe(null);\n            });\n        });\n\n        describe('Loading', function() {\n            it('With new review', async function() {\n                expect(review.isNew()).toBe(true);\n\n                dlg = await createReviewDialog();\n\n                expect(dlg._bodyTopView.$editor.text()).toBe('');\n                expect(dlg._bodyBottomView.$editor.text()).toBe('');\n                expect(dlg._bodyBottomView.$el.is(':visible')).toBe(false);\n                expect(dlg._$shipIt.prop('checked')).toBe(false);\n                expect(dlg._$spinner).toBe(null);\n            });\n\n            describe('With body and top text', function() {\n                const bodyTopText = 'My body top';\n                const bodyBottomText = 'My body bottom';\n\n                beforeEach(function() {\n                    review.set({\n                        bodyTop: bodyTopText,\n                        bodyBottom: bodyBottomText,\n                        loaded: true,\n                    });\n                });\n\n                it('Clearing body bottom hides footer', async function() {\n                    dlg = await createReviewDialog();\n\n                    expect(dlg._bodyBottomView.$editor.text())\n                        .toBe(bodyBottomText);\n                    expect(dlg._bodyBottomView.$el.is(':visible')).toBe(true);\n\n                    review.set('bodyBottom', '');\n\n                    expect(dlg._bodyBottomView.$el.is(':visible')).toBe(false);\n                });\n            });\n\n            describe('With existing review', function() {\n                const bodyTopText = 'My body top';\n                const bodyBottomText = 'My body bottom';\n                const shipIt = true;\n                let fileAttachmentCommentsPayload;\n                let generalCommentsPayload;\n                let diffCommentsPayload;\n                let screenshotCommentsPayload;\n                let commentView;\n                let ajaxData;\n\n                beforeEach(function() {\n                    review.set({\n                        bodyTop: bodyTopText,\n                        bodyBottom: bodyBottomText,\n                        shipIt: shipIt,\n                        loaded: true,\n                        id: 42,\n                        links: {\n                            diff_comments: {\n                                href: '/diff-comments/',\n                            },\n                            file_attachment_comments: {\n                                href: '/file-attachment-comments/',\n                            },\n                            general_comments: {\n                               href: '/general-comments/',\n                            },\n                            screenshot_comments: {\n                                href: '/screenshot-comments/',\n                            },\n                            self: {\n                                href: '/reviews/42/',\n                            },\n                        },\n                    });\n\n                    diffCommentsPayload =\n                        _.clone(emptyDiffCommentsPayload);\n                    screenshotCommentsPayload =\n                        _.clone(emptyScreenshotCommentsPayload);\n                    fileAttachmentCommentsPayload =\n                        _.clone(emptyFileAttachmentCommentsPayload);\n                    generalCommentsPayload =\n                        _.clone(emptyGeneralCommentsPayload);\n\n                    spyOn($, 'ajax').and.callFake(options => {\n                        if (options.type === 'DELETE') {\n                            options.success({});\n                        } else if (options.url ===\n                                   '/file-attachment-comments/') {\n                            options.success(fileAttachmentCommentsPayload);\n                        } else if (options.url === '/diff-comments/') {\n                            options.success(diffCommentsPayload);\n                        } else if (options.url === '/screenshot-comments/') {\n                            options.success(screenshotCommentsPayload);\n                        } else if (options.url === '/general-comments/') {\n                            options.success(generalCommentsPayload);\n                        }\n                    });\n                });\n\n                describe('Review properties', function() {\n                    function testLoadReview() {\n                        return new Promise((resolve, reject) => {\n                            dlg = RB.ReviewDialogView.create({\n                                review: review,\n                                container: $testsScratch,\n                                reviewRequestEditor: reviewRequestEditor,\n                            });\n\n                            dlg.on('loadCommentsDone', () => {\n                                expect(dlg._bodyTopView.$editor.text())\n                                    .toBe(bodyTopText);\n                                expect(dlg._bodyBottomView.$editor.text())\n                                    .toBe(bodyBottomText);\n                                expect(dlg._bodyBottomView.$el.is(':visible'))\n                                    .toBe(true);\n                                expect(dlg._$shipIt.prop('checked')).toBe(shipIt);\n                                expect(dlg.$('.review-comments .draft').length).toBe(2);\n                                expect(dlg._$spinner).toBe(null);\n\n                                resolve();\n                            });\n                        });\n                    }\n\n                    it('With defaultUseRichText=true', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText', true);\n\n                        await testLoadReview();\n\n                        expect(review.ready.calls.argsFor(0)[0].data).toEqual({\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw,markdown',\n                        });\n                    });\n\n                    it('With defaultUseRichText=false', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText',\n                                                    false);\n\n                        await testLoadReview();\n\n                        expect(review.ready.calls.argsFor(0)[0].data)\n                            .toEqual({\n                                'force-text-type': 'html',\n                                'include-text-types': 'raw',\n                            });\n                    });\n                });\n\n                describe('General comments', function() {\n                    it('Disabled', async function() {\n                        RB.EnabledFeatures.generalComments = false;\n\n                        dlg = await createReviewDialog();\n\n                        const $button = dlg._$buttons.find(\n                            'input[value=\"Add General Comment\"]');\n                        expect($button.length).toBe(0);\n\n                        expect($.ajax).toHaveBeenCalled();\n                        expect($.ajax.calls.argsFor(0)[0].url).not.toBe(\n                            '/general-comments/');\n\n                        expect(dlg._commentViews.length).toBe(0);\n                    });\n\n                    describe('Enabled', function() {\n                        async function testLoadGeneralComments() {\n                            generalCommentsPayload.total_results = 1;\n                            generalCommentsPayload.general_comments = [\n                                generalCommentPayload,\n                            ];\n\n                            dlg = await createReviewDialog();\n\n                            const $button = dlg._$buttons.find(\n                                'input[value=\"Add General Comment\"]');\n                            expect($button.length).toBe(1);\n\n                            expect($.ajax).toHaveBeenCalled();\n                            expect($.ajax.calls.argsFor(0)[0].url).toBe(\n                                '/general-comments/');\n                            ajaxData = $.ajax.calls.argsFor(0)[0].data;\n\n                            expect(dlg._commentViews.length).toBe(1);\n\n                            commentView = dlg._commentViews[0];\n                            expect(commentView.$editor.text())\n                                .toBe(generalCommentPayload.text);\n                            expect(commentView.$issueOpened.prop('checked'))\n                                .toBe(\n                            generalCommentPayload.issue_opened);\n\n                            expect(dlg._bodyBottomView.$el.is(':visible'))\n                                .toBe(true);\n                            expect(dlg._$spinner).toBe(null);\n                        }\n\n                        it('With defaultUseRichText=true', async function() {\n                            RB.UserSession.instance.set('defaultUseRichText',\n                                                        true);\n\n                            await testLoadGeneralComments();\n\n                            expect(ajaxData).toEqual({\n                                'api_format': 'json',\n                                'max-results': 50,\n                                'force-text-type': 'html',\n                                'include-text-types': 'raw,markdown',\n                            });\n                        });\n\n                        it('With defaultUseRichText=false', async function() {\n                            RB.UserSession.instance.set('defaultUseRichText',\n                                                        false);\n\n                            await testLoadGeneralComments();\n\n                            expect(ajaxData).toEqual({\n                                'api_format': 'json',\n                                'max-results': 50,\n                                'force-text-type': 'html',\n                                'include-text-types': 'raw',\n                            });\n                        });\n\n                        it('Deleting comment', async function() {\n                            spyOn(window, 'confirm').and.returnValue(true);\n\n                            await testLoadGeneralComments();\n\n                            expect(dlg._generalCommentsCollection.length)\n                                .toBe(1);\n\n                            spyOn(dlg._commentViews[0].$el, 'fadeOut')\n                                .and.callFake(opts => opts.complete());\n\n                            let caughtEvent = new Promise((resolve, reject) => {\n                                dlg._generalCommentsCollection.at(0).once(\n                                    'destroyed', () => resolve());\n                            });\n\n                            dlg.$('.delete-comment').click();\n\n                            await caughtEvent;\n                            expect(dlg._generalCommentsCollection.length)\n                                .toBe(0);\n                        });\n\n                        it('Deleting comment and cancelling', async function() {\n                            spyOn(window, 'confirm').and.returnValue(false);\n\n                            await testLoadGeneralComments();\n\n                            expect(dlg._generalCommentsCollection.length)\n                                .toBe(1);\n\n                            dlg.$('.delete-comment').click();\n                            expect(dlg._generalCommentsCollection.length)\n                                .toBe(1);\n                        });\n                    });\n                });\n\n                describe('Diff comments', function() {\n                    async function testLoadDiffComments() {\n                        const diffQueueProto =\n                            RB.DiffFragmentQueueView.prototype;\n\n                        diffCommentsPayload.total_results = 1;\n                        diffCommentsPayload.diff_comments =\n                            [diffCommentPayload];\n\n                        dlg = await createReviewDialog();\n\n                        expect($.ajax).toHaveBeenCalled();\n                        expect($.ajax.calls.argsFor(3)[0].url).toBe(\n                            '/diff-comments/');\n                        ajaxData = $.ajax.calls.argsFor(3)[0].data;\n\n                        expect(diffQueueProto.queueLoad.calls.count()).toBe(1);\n                        expect(diffQueueProto.loadFragments).toHaveBeenCalled();\n                        expect(dlg._commentViews.length).toBe(1);\n\n                        commentView = dlg._commentViews[0];\n                        expect(commentView.$editor.text())\n                            .toBe(diffCommentPayload.text);\n                        expect(commentView.$issueOpened.prop('checked'))\n                            .toBe(diffCommentPayload.issue_opened);\n\n                        expect(dlg._bodyBottomView.$el.is(':visible'))\n                            .toBe(true);\n                        expect(dlg._$spinner).toBe(null);\n                    }\n\n                    it('With defaultUseRichText=true', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText', true);\n\n                        await testLoadDiffComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'filediff,interfilediff',\n                            'order-by': 'filediff,first_line',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw,markdown',\n                        });\n                    });\n\n                    it('With defaultUseRichText=false', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText',\n                                                    false);\n\n                        await testLoadDiffComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'filediff,interfilediff',\n                            'order-by': 'filediff,first_line',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw',\n                        });\n                    });\n\n                    it('Deleting comment', async function() {\n                        spyOn(window, 'confirm').and.returnValue(true);\n\n                        await testLoadDiffComments();\n\n                        expect(dlg._diffCommentsCollection.length).toBe(1);\n\n                        spyOn(dlg._commentViews[0].$el, 'fadeOut')\n                            .and.callFake(opts => opts.complete());\n\n                        let caughtEvent = new Promise((resolve, reject) => {\n                            dlg._diffCommentsCollection.at(0).once(\n                                'destroyed', () => resolve());\n                        });\n\n                        dlg.$('.delete-comment').click();\n\n                        await caughtEvent;\n                        expect(dlg._diffCommentsCollection.length).toBe(0);\n                    });\n\n                    it('Deleting comment and cancelling', async function() {\n                        spyOn(window, 'confirm').and.returnValue(false);\n\n                        await testLoadDiffComments();\n\n                        expect(dlg._diffCommentsCollection.length).toBe(1);\n                        dlg.$('.delete-comment').click();\n                        expect(dlg._diffCommentsCollection.length).toBe(1);\n                    });\n                });\n\n                describe('File attachment comments', function() {\n                    async function testLoadFileAttachmentComments() {\n                        fileAttachmentCommentsPayload.total_results = 1;\n                        fileAttachmentCommentsPayload.file_attachment_comments =\n                            [fileAttachmentCommentPayload];\n\n                        dlg = await createReviewDialog();\n\n                        expect($.ajax).toHaveBeenCalled();\n                        expect($.ajax.calls.argsFor(2)[0].url).toBe(\n                            '/file-attachment-comments/');\n                        ajaxData = $.ajax.calls.argsFor(2)[0].data;\n\n                        expect(dlg._commentViews.length).toBe(1);\n\n                        commentView = dlg._commentViews[0];\n                        expect(commentView.$editor.text())\n                            .toBe(fileAttachmentCommentPayload.text);\n                        expect(commentView.$issueOpened.prop('checked')).toBe(\n                            fileAttachmentCommentPayload.issue_opened);\n                        expect(commentView.$('.filename a').attr('href')).toBe(\n                            fileAttachmentCommentPayload.review_url);\n                        expect(commentView.$('.filename a').text()).toBe(\n                            fileAttachmentCommentPayload.link_text);\n                        expect(commentView.$('.thumbnail').html()).toBe(\n                            fileAttachmentCommentPayload.thumbnail_html);\n\n                        expect(dlg._bodyBottomView.$el.is(':visible'))\n                            .toBe(true);\n                        expect(dlg._$spinner).toBe(null);\n                    }\n\n                    it('With defaultUseRichText=true', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText', true);\n\n                        await testLoadFileAttachmentComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'diff_against_file_attachment,' +\n                                      'file_attachment',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw,markdown',\n                        });\n                    });\n\n                    it('With defaultUseRichText=false', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText',\n                                                    false);\n\n                        await testLoadFileAttachmentComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'diff_against_file_attachment,' +\n                                      'file_attachment',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw',\n                        });\n                    });\n\n                    it('Deleting comment', async function() {\n                        spyOn(window, 'confirm').and.returnValue(true);\n\n                        await testLoadFileAttachmentComments();\n\n                        expect(dlg._fileAttachmentCommentsCollection.length)\n                            .toBe(1);\n\n                        spyOn(dlg._commentViews[0].$el, 'fadeOut')\n                            .and.callFake(opts => opts.complete());\n\n                        let caughtEvent = new Promise((resolve, reject) => {\n                            dlg._fileAttachmentCommentsCollection.at(0).once(\n                                'destroyed', () => resolve());\n                        });\n\n                        dlg.$('.delete-comment').click();\n\n                        await caughtEvent;\n                        expect(dlg._fileAttachmentCommentsCollection.length)\n                            .toBe(0);\n                    });\n\n                    it('Deleting comment and cancelling', async function() {\n                        spyOn(window, 'confirm').and.returnValue(false);\n\n                        await testLoadFileAttachmentComments();\n\n                        expect(dlg._fileAttachmentCommentsCollection.length)\n                            .toBe(1);\n\n                        dlg.$('.delete-comment').click();\n\n                        expect(dlg._fileAttachmentCommentsCollection.length)\n                            .toBe(1);\n                    });\n                });\n\n                describe('Screenshot comments', function() {\n                    async function testLoadScreenshotComments() {\n                        screenshotCommentsPayload.total_results = 1;\n                        screenshotCommentsPayload.screenshot_comments = [\n                            screenshotCommentPayload,\n                        ];\n\n                        dlg = await createReviewDialog();\n\n                        expect($.ajax).toHaveBeenCalled();\n                        expect($.ajax.calls.argsFor(1)[0].url).toBe(\n                            '/screenshot-comments/');\n                        ajaxData = $.ajax.calls.argsFor(1)[0].data;\n\n                        expect(dlg._commentViews.length).toBe(1);\n\n                        commentView = dlg._commentViews[0];\n                        expect(commentView.$editor.text())\n                            .toBe(screenshotCommentPayload.text);\n                        expect(commentView.$issueOpened.prop('checked')).toBe(\n                            screenshotCommentPayload.issue_opened);\n\n                        const $img = commentView.$('img');\n                        expect($img.attr('src')).toBe(\n                            screenshotCommentPayload.thumbnail_url);\n                        expect($img.attr('width')).toBe(\n                            screenshotCommentPayload.w.toString());\n                        expect($img.attr('height')).toBe(\n                            screenshotCommentPayload.h.toString());\n                        expect($img.attr('alt')).toBe(\n                            screenshotCommentPayload.screenshot.caption);\n\n                        const $filenameA = commentView.$('.filename a');\n                        expect($filenameA.attr('href')).toBe(\n                            screenshotCommentPayload.screenshot.review_url);\n                        expect($filenameA.text()).toBe(\n                            screenshotCommentPayload.screenshot.caption);\n\n                        expect(dlg._bodyBottomView.$el.is(':visible'))\n                            .toBe(true);\n                        expect(dlg._$spinner).toBe(null);\n                    }\n\n                    it('With defaultUseRichText=true', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText', true);\n\n                        await testLoadScreenshotComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'screenshot',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw,markdown',\n                        });\n                    });\n\n                    it('With defaultUseRichText=false', async function() {\n                        RB.UserSession.instance.set('defaultUseRichText',\n                                                    false);\n\n                        await testLoadScreenshotComments();\n\n                        expect(ajaxData).toEqual({\n                            'api_format': 'json',\n                            'max-results': 50,\n                            'expand': 'screenshot',\n                            'force-text-type': 'html',\n                            'include-text-types': 'raw',\n                        });\n                    });\n\n                    it('Deleting comment', async function() {\n                        spyOn(window, 'confirm').and.returnValue(true);\n\n                        await testLoadScreenshotComments();\n\n                        expect(dlg._screenshotCommentsCollection.length)\n                            .toBe(1);\n\n                        spyOn(dlg._commentViews[0].$el, 'fadeOut')\n                            .and.callFake(opts => opts.complete());\n\n                        let caughtEvent = new Promise((resolve, reject) => {\n                            dlg._screenshotCommentsCollection.at(0).once(\n                                'destroyed', () => resolve());\n                        });\n\n                        dlg.$('.delete-comment').click();\n\n                        await caughtEvent;\n                        expect(dlg._screenshotCommentsCollection.length)\n                            .toBe(0);\n                    });\n\n                    it('Deleting comment and cancelling', async function() {\n                        spyOn(window, 'confirm').and.returnValue(false);\n\n                        await testLoadScreenshotComments();\n\n                        expect(dlg._screenshotCommentsCollection.length)\n                            .toBe(1);\n\n                        dlg.$('.delete-comment').click();\n\n                        expect(dlg._screenshotCommentsCollection.length)\n                            .toBe(1);\n                    });\n                });\n            });\n        });\n\n        describe('Saving', function() {\n            let fileAttachmentCommentsPayload;\n            let generalCommentsPayload;\n            let diffCommentsPayload;\n            let screenshotCommentsPayload;\n            let commentView;\n            let comment;\n\n            async function testSaveComment(richText) {\n                const newCommentText = 'New comment text';\n\n                dlg = await createReviewDialog();\n\n                expect(dlg._commentViews.length).toBe(1);\n\n                commentView = dlg._commentViews[0];\n                comment = commentView.model;\n\n                spyOn(comment, 'save').and.callFake(() => {\n                    comment.trigger('sync');\n                    return Promise.resolve();\n                });\n\n                /* Set some new state for the comment. */\n                commentView.inlineEditorView.startEdit();\n                commentView.inlineEditorView.setValue(newCommentText);\n                commentView.textEditor.setRichText(richText);\n                await commentView.save();\n\n                expect(comment.save).toHaveBeenCalled();\n                expect(comment.get('text')).toBe(newCommentText);\n                expect(comment.get('richText')).toBe(richText);\n            }\n\n            async function testSaveCommentPreventsXSS() {\n                const newCommentText =\n                    '\"><script>window.rbTestFoundXSS = true;</script>';\n\n                delete window.rbTestFoundXSS;\n\n                dlg = await createReviewDialog();\n\n                expect(dlg._commentViews.length).toBe(1);\n\n                commentView = dlg._commentViews[0];\n                comment = commentView.model;\n\n                spyOn(comment, 'save').and.callFake(() => {\n                    comment.trigger('sync');\n                    return Promise.resolve();\n                });\n\n                /* Set some new state for the comment. */\n                commentView.inlineEditorView.startEdit();\n                commentView.inlineEditorView.setValue(newCommentText);\n                commentView.textEditor.setRichText(true);\n\n                await commentView.save();\n\n                expect(comment.save).toHaveBeenCalled();\n                expect(comment.get('text')).toBe(newCommentText);\n                expect(window.rbTestFoundXSS).toBe(undefined);\n            }\n\n            beforeEach(function() {\n                review.set({\n                    loaded: true,\n                    id: 42,\n                    links: {\n                        diff_comments: {\n                            href: '/diff-comments/',\n                        },\n                        file_attachment_comments: {\n                            href: '/file-attachment-comments/',\n                        },\n                        general_comments: {\n                            href: '/general-comments/',\n                        },\n                        screenshot_comments: {\n                            href: '/screenshot-comments/',\n                        },\n                    },\n                });\n\n                diffCommentsPayload =\n                    _.clone(emptyDiffCommentsPayload);\n                screenshotCommentsPayload =\n                    _.clone(emptyScreenshotCommentsPayload);\n                fileAttachmentCommentsPayload =\n                    _.clone(emptyFileAttachmentCommentsPayload);\n                generalCommentsPayload =\n                    _.clone(emptyGeneralCommentsPayload);\n\n                spyOn(review, 'save').and.resolveTo();\n\n                spyOn($, 'ajax').and.callFake(options => {\n                    if (options.url === '/file-attachment-comments/') {\n                        options.success(fileAttachmentCommentsPayload);\n                    } else if (options.url === '/diff-comments/') {\n                        options.success(diffCommentsPayload);\n                    } else if (options.url === '/screenshot-comments/') {\n                        options.success(screenshotCommentsPayload);\n                    } else if (options.url === '/general-comments/') {\n                        options.success(generalCommentsPayload);\n                    }\n                });\n            });\n\n            describe('Review properties', function() {\n                function testSelfXSS(bodyView, attrName) {\n                    const text = '\"><script>window.rbTestFoundXSS = true;' +\n                                 '</script>';\n                    const editor = bodyView.textEditor;\n\n                    delete window.rbTestFoundXSS;\n\n                    bodyView.openEditor();\n                    editor.setText(text);\n                    editor.setRichText(true);\n                    bodyView.save();\n\n                    expect(editor.getText()).toBe(text);\n                    expect(review.save).toHaveBeenCalled();\n                    expect(review.get(attrName)).toBe(text);\n                    expect(window.rbTestFoundXSS).toBe(undefined);\n                }\n\n                beforeEach(async function() {\n                    dlg = await createReviewDialog();\n                });\n\n                describe('Body Top', function() {\n                    function runTest(richText) {\n                        const text = 'My new text';\n                        const bodyTopEditor = dlg._bodyTopView.textEditor;\n\n                        dlg._bodyTopView.openEditor();\n                        bodyTopEditor.setText(text);\n                        bodyTopEditor.setRichText(richText);\n                        dlg._bodyTopView.save();\n\n                        expect(bodyTopEditor.getText()).toBe(text);\n                        expect(review.save).toHaveBeenCalled();\n                        expect(review.get('bodyTop')).toBe(text);\n                        expect(review.get('bodyTopRichText')).toBe(richText);\n                    }\n\n                    it('For Markdown', function() {\n                        runTest(true);\n                    });\n\n                    it('For plain text', function() {\n                        runTest(false);\n                    });\n\n                    it('Prevents Self-XSS', function() {\n                        testSelfXSS(dlg._bodyTopView, 'bodyTop');\n                    });\n                });\n\n                describe('Body Bottom', function() {\n                    function runTest(richText) {\n                        const text = 'My new text';\n                        const bodyBottomEditor = dlg._bodyBottomView.textEditor;\n\n                        dlg._bodyBottomView.openEditor();\n                        bodyBottomEditor.setText(text);\n                        bodyBottomEditor.setRichText(richText);\n                        dlg._bodyBottomView.save();\n\n                        expect(bodyBottomEditor.getText()).toBe(text);\n                        expect(review.save).toHaveBeenCalled();\n                        expect(review.get('bodyBottom')).toBe(text);\n                        expect(review.get('bodyBottomRichText')).toBe(richText);\n                    }\n\n                    it('For Markdown', function() {\n                        runTest(true);\n                    });\n\n                    it('For plain text', function() {\n                        runTest(false);\n                    });\n\n                    it('Prevents Self-XSS', function() {\n                        testSelfXSS(dlg._bodyBottomView, 'bodyBottom');\n                    });\n                });\n\n                describe('Ship It', function() {\n                    async function runTest(shipIt) {\n                        dlg._$shipIt.prop('checked', shipIt);\n                        await dlg._saveReview();\n\n                        expect(dlg._$shipIt.prop('checked')).toBe(shipIt);\n                    }\n\n                    it('Checked', async function() {\n                        await runTest(true);\n                    });\n\n                    it('Unchecked', async function() {\n                        await runTest(false);\n                    });\n                });\n            });\n\n            describe('Diff comments', function() {\n                beforeEach(function() {\n                    diffCommentsPayload.total_results = 1;\n                    diffCommentsPayload.diff_comments = [diffCommentPayload];\n                });\n\n                it('For Markdown', async function() {\n                    await testSaveComment(true);\n                });\n\n                it('For plain text', async function() {\n                    await testSaveComment(false);\n                });\n\n                it('Prevents Self-XSS', async function() {\n                    await testSaveCommentPreventsXSS();\n                });\n            });\n\n            describe('File attachment comments', function() {\n                beforeEach(function() {\n                    fileAttachmentCommentsPayload.total_results = 1;\n                    fileAttachmentCommentsPayload.file_attachment_comments = [\n                        fileAttachmentCommentPayload,\n                    ];\n                });\n\n                it('For Markdown', async function() {\n                    await testSaveComment(true);\n                });\n\n                it('For plain text', async function() {\n                    await testSaveComment(false);\n                });\n\n                it('Prevents Self-XSS', async function() {\n                    await testSaveCommentPreventsXSS();\n                });\n            });\n\n            describe('General comments', function() {\n                beforeEach(function() {\n                    generalCommentsPayload.total_results = 1;\n                    generalCommentsPayload.general_comments = [\n                        generalCommentPayload,\n                    ];\n                });\n\n                it('For Markdown', async function() {\n                    await testSaveComment(true);\n                });\n\n                it('For plain text', async function() {\n                    await testSaveComment(false);\n                });\n            });\n\n            describe('Screenshot comments', function() {\n                beforeEach(function() {\n                    screenshotCommentsPayload.total_results = 1;\n                    screenshotCommentsPayload.screenshot_comments = [\n                        screenshotCommentPayload\n                    ];\n                });\n\n                it('For Markdown', async function() {\n                    await testSaveComment(true);\n                });\n\n                it('For plain text', async function() {\n                    await testSaveComment(false);\n                });\n\n                it('Prevents Self-XSS', async function() {\n                    await testSaveCommentPreventsXSS();\n                });\n            });\n        });\n    });\n});\n"],"mappings":"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"}